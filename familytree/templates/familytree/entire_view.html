{% extends 'base.html' %}
{% load static %}
{% block title %}
  <title>Family Tree View</title>
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/familytree/entire_view.css' %}" />
{% endblock %}

{% block content %}
  <div class="container text-center">
    <h2 class="mb-5">Your Family Tree</h2>

    <!-- Grandparents -->
    <div class="tree-level">
      <div class="title">
        <h3>Grandparents</h3>
      </div>
      <div class="person-container">
        {% for gp in grandparents %}
          <div class="person-box">
            <div class="person-name">
              <a href="{% url 'classic_tree_view' gp.id %}">{{ gp.first_name }} {{ gp.last_name }}</a>
            </div>
            <div class="person-actions mt-2">
              <a href="{% url 'view_details' pov.id gp.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
              <a href="{% url 'family_view' gp.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- Parents -->
    <div class="tree-level">
      <div class="title">
        <h3>Parents</h3>
      </div>
      <div class="person-container">
        {% for pp in partner_parents %}
          <div class="person-box alt-line">
            <div class="person-name">
              <a href="{% url 'classic_tree_view' pp.id %}">{{ pp.first_name }} {{ pp.last_name }} (Partners side)</a>
            </div>
            <div class="person-actions mt-2">
              <a href="{% url 'view_details' pov.id pp.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
              <a href="{% url 'family_view' pp.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
            </div>
          </div>
        {% endfor %}
        {% for p in parents %}
          <div class="person-box">
            <div class="person-name">
              <a href="{% url 'classic_tree_view' p.id %}">{{ p.first_name }} {{ p.last_name }}</a>
            </div>
            <div class="person-actions mt-2">
              <a href="{% url 'view_details' pov.id p.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
              <a href="{% url 'family_view' p.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <!-- POV & Partner -->
    <div class="tree-level">
      <div class="title">
        <h3>You and your Partner</h3>
      </div>
      <div class="person-container">
        <div class="person-box pov">
          <div class="person-name">
            <a href="{% url 'classic_tree_view' pov.id %}">{{ pov.first_name }} {{ pov.last_name }} (current focus)</a>
          </div>
          <div class="person-actions mt-2">
            <a href="{% url 'view_details' pov.id pov.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
            <a href="{% url 'family_view' pov.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
          </div>
        </div>

        {% if partner %}
          <div class="person-box partner">
            <div class="person-name">
              <a href="{% url 'classic_tree_view' partner.id %}">{{ partner.first_name }} {{ partner.last_name }}</a>
            </div>
            <div class="person-actions mt-2">
              <a href="{% url 'view_details' pov.id partner.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
              <a href="{% url 'family_view' partner.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
            </div>
          </div>
        {% endif %}
      </div>
    </div>

    <!-- Children -->
    <div class="tree-level">
      <div class="title">
        <h3>Children</h3>
      </div>
      <div class="person-container">
        {% for c in children %}
          <div class="person-box child">
            <div class="person-name">
              <a href="{% url 'classic_tree_view' c.id %}">{{ c.first_name }} {{ c.last_name }}</a>
            </div>
            <div class="person-actions mt-2">
              <a href="{% url 'view_details' pov.id c.id %}" class="btn btn-outline-primary btn-sm">View Details</a>
              <a href="{% url 'family_view' c.id %}" class="btn btn-outline-secondary btn-sm">Focused View</a>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>
{% endblock %}
